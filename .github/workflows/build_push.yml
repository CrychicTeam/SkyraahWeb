name: build and push to sever
on: [push]

jobs:
  deployment_job:
    runs-on: ubuntu-latest
    name: Deployment Job
    steps:
    - uses: actions/checkout@v4

    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: 20

    - name: npm install, build, and test
      run: |
        npm install -g pnpm
        pnpm install
        pnpm run docs:build
        ls -l

    - name: scp ssh pipelines
      uses: cross-the-world/ssh-scp-ssh-pipelines@latest
      env:
        LASTSSH: "Doing something after copying"
      with:
        host: ${{ secrets.SEVER_HOST }}
        user: ${{ secrets.SEVER_USER }}
        pass: ${{ secrets.SEVER_PASS }}
        scp: |
          docs/.vitepress/dist/* => /skyraah